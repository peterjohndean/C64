;
; Check if anything is in the storage area,
; if so dump what it finds.
;
!zone DASA {
DASA:
	; Is BASIC array storage empty?
	+CMP16 MM_ARYTAB, MM_STREND
	bne .PASA
	rts
	
.PASA:
	; Initialise
    lda #1
    sta Index
    
    lda #1
    sta Bool
    
    ;
    ; Header
    +BASIC_STROUT .HDR1
    
    ;
    ; (Size, Count)
    +KERNEL_CHROUT '('
    
    ;
    ; Calculate bytes used
    +SUB16 MM_STREND, MM_ARYTAB, Ptr3	; Ptr3 =  MM_STREND - MM_ARYTAB
    +BASIC_LINPRT Ptr3					; Output Ptr3 value
    ;+KERNEL_CHROUT ','
    
    ;
    ; Location [xxxx-yyyy]
    +BASIC_STROUT .HDR2
    +OUTPUT_HEXWORD MM_ARYTAB			; Address Start
    +KERNEL_CHROUT '-'
    +OUTPUT_HEXWORD MM_STREND			; Address End
    +KERNEL_CHROUT ']'
    jsr BASIC_GOCR						; Newline
	
    ;
    ; Dump Table
    lda MM_ARYTAB
    sta Ptr1
    lda MM_ARYTAB + 1
    sta Ptr1 + 1
    
    lda MM_STREND
    sta Ptr2
    lda MM_STREND + 1
    sta Ptr2 + 1
    jsr DumpTable

	rts

;
!address .HDR1  !pet "basic array storage", 13, 0
!address .HDR2	!pet ") [", 0
}
